{"version":3,"file":"weex-dingtalk-min.js","sources":["../package/weex-dingtalk-polyfills/src/core/env.js","../package/weex-dingtalk-polyfills/src/core/requireModule.js","../package/weex-dingtalk-polyfills/src/index.js","../src/platforms/web/nativeEvent.js","../src/platforms/web/apis.js","../src/platforms/web/index.js","../package/weex-dingtalk-exec/src/android_exec.js","../package/weex-dingtalk-exec/src/ios_exec.js","../package/weex-dingtalk-exec/src/index.js","../package/weex-dingtalk-require/src/global-api/system-modules.js","../package/weex-dingtalk-require/src/global-api/EventEmitter.js","../package/weex-dingtalk-require/src/global-api/parseModules.js","../package/weex-dingtalk-require/src/index.js","../src/core/parseJsApis.js","../src/core/permissionJsApis.js","../src/platforms/weex/index.js","../src/shared/logger.js","../src/index.js"],"sourcesContent":["/* @flow */\n\nfunction initEnv() : Object{\n  let weexEnv = {};\n  if (typeof weex !== 'undefined'){\n    weexEnv.platform = weex.config.env.platform;\n  } else {\n    // Rax Weex\n    if (typeof callNative === 'function'){\n      weexEnv.platform = navigator.platform;\n    } else {\n      // Rax Web\n      weexEnv.platform = 'Web';\n    }\n  }\n  return weexEnv;\n}\n\nexport default initEnv;\n","/* @flow */\n\nfunction initRequireModule () : Function {\n  let requireModule = function(name){\n    let moduleName = '@weex-module/' + name;\n    return __weex_require__(moduleName);\n  }\n  if (typeof weex !== 'undefined'){\n    requireModule = weex.requireModule;\n  }\n  return requireModule;\n}\n\nexport default initRequireModule;\n","/* @flow */\n\nimport initEnv from './core/env.js';\nimport initRequire from './core/requireModule.js';\n\nfunction polyfills () : Object{\n  let weexVar = {\n    env: initEnv(),\n    requireModule: initRequire()\n  };\n  return weexVar;\n}\n\nlet weexInstanceVar;\nif (!weexInstanceVar){\n  weexInstanceVar = polyfills();\n}\n\nexport default weexInstanceVar;\n","\n/* @flow */\n\nfunction initNativeEvent(dt:Object){\n  dt.on = function(type, listener, useCapture){\n    document.addEventListener(type, listener, useCapture);\n  }\n  dt.off = function(type, listener, useCapture){\n    document.removeEventListener(type, listener, useCapture);\n  }\n}\n\nexport default initNativeEvent;\n","\n/* @flow */\n\nfunction initApis(dt: Object){\n  dt.apis = dt;\n}\n\nexport default initApis;\n","\n/* @flow */\n\nimport initNativeEvent from './nativeEvent.js';\nimport initApis from './apis.js';\n\nfunction initWebDingtalkSDK () : Object {\n  const GLOBALWINDOW:GLOBALWINDOW = (function(){\n    return (function(){\n      return window || this;\n    })();\n  })();\n  if (!GLOBALWINDOW.dd){\n    console.error('Not Found Dingtalk.js');\n    throw new Error()\n  }\n  initNativeEvent(GLOBALWINDOW.dd);\n  initApis(GLOBALWINDOW.dd);\n  return GLOBALWINDOW.dd;\n}\n\nexport default initWebDingtalkSDK;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function android_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  const STATUS_NO_RESULT: string = '0';\n  const STATUS_OK: string = '1';\n  const STATUS_ERROR: string = '2';\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\" && response.__status__) {\n        const status = response.__status__;\n        const message = response.__message__;\n        if (STATUS_OK === status){\n            win && win.call(context, message);\n        } else if (STATUS_ERROR === status){\n            fail && fail.call(context, message);\n        }\n      } else {\n        fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function ios_exec(exec:Function,config:Object){\n  const body = config.body;\n  const win = config.onSuccess;\n  const fail = config.onFail;\n  const context = config.context;\n  if (exec && typeof exec === 'function'){\n    exec(body,function (response) {\n      if (typeof response !== \"undefined\") {\n        if ('0' === response.errorCode) {\n          win && win.call(context, response.result);\n        } else {\n          fail && fail.call(context, response.result);\n        }\n      }\n      else {\n          fail && fail.call('-1', \"\");\n      }\n    });\n  } else {\n    fail && fail.call('-1', \"\");\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport android_exec from './android_exec.js';\nimport ios_exec from './ios_exec.js';\nimport weexInstanceVar from 'weex-dingtalk-polyfills';\n\nlet platform  = weexInstanceVar.env.platform;\nlet nativeExec: ?Function = null;\nif (platform !== 'Web'){\n  nativeExec = weexInstanceVar.requireModule('nuvajs-exec').exec;\n}\n\nfunction exec_affirm(plugin: string, action: string, args: ?Object,onSuccess: ?Function, onFail: ?Function, context: ?Object){\n  const body: {\n    plugin: string,\n    action: string,\n    args: Object\n  } = {\n    plugin: plugin,\n    action: action,\n    args: args ? args : {}\n  }\n  const config: {\n    body: Object,\n    onSuccess: ?Function,\n    onFail: ?Function,\n    context: ?Object\n  } = {\n    body: body,\n    onSuccess: onSuccess ? onSuccess : null,\n    onFail: onFail ? onFail : null,\n    context: context ? context : null\n  }\n  exec(config);\n}\n\nfunction exec(config:Object) {\n  let native_exec: Function = nativeExec ? nativeExec : function(){};\n  if (platform === 'iOS'){\n      ios_exec(native_exec,config);\n  } else {\n      if (platform === 'android'){\n          android_exec(native_exec,config);\n      }\n  }\n}\n\nexport default exec;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet __ship_modules__: Object = {};\nlet requireStack: Array<string> = [];\nlet inProgressModules: Object = {};\n\nfunction build(__ship_module__: Object) {\n  let factory = __ship_module__.factory;\n  __ship_module__.__ship_exports__ = {};\n  delete __ship_module__.factory;\n  factory(__ship_require__, __ship_module__.__ship_exports__, __ship_module__);\n  return __ship_module__.__ship_exports__;\n}\nexport function __ship_require__(id: string) : any {\n  if (!__ship_modules__[id]) {\n    throw '__ship_module__ ' + id + ' not found';\n  } else if (id in inProgressModules) {\n    const cycle = requireStack.slice(inProgressModules[id]).join('->') + '->' + id;\n    throw 'Cycle in require graph: ' + cycle;\n  }\n  if (__ship_modules__[id].factory) {\n    try {\n      inProgressModules[id] = requireStack.length;\n      requireStack.push(id);\n      return build(__ship_modules__[id]);\n    } finally {\n      delete inProgressModules[id];\n      requireStack.pop();\n    }\n  }\n  return __ship_modules__[id].__ship_exports__;\n};\n\nexport function __ship_define__(id: string, factory: Function) {\n  if (__ship_modules__[id]) {\n    throw 'module ' + id + ' already defined';\n  }\n  __ship_modules__[id] = {\n    id: id,\n    factory: factory\n  };\n};\n\nexport function __ship_define_remove__(id: string){\n  delete __ship_modules__[id];\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet cat: Object = {};\nlet EventEmitter:{\n  on: Function,\n  off: Function,\n  once: Function,\n  emit: Function\n} = {\n  on: function(event: string,fun: Function){\n    let cbs = cat[event];\n    cbs ? cbs.push(fun) : cat[event] = [];\n    if (!cbs) {\n      cat[event].push(fun);\n    }\n  },\n  off: function(event: string,fun: Function){\n    let cbs = cat[event];\n    if (!cbs) {\n      return false;\n    }\n    if (!event && !fun) {\n      cat = {};\n      return true;\n    }\n    if (event && !fun) {\n      cat[event] = null;\n      return true;\n    }\n    let cb;\n    let i = cbs.length;\n    while(i--){\n      cb = cbs[i];\n      if (cb === fun || cb.fun === fun) {\n        cbs.splice(i,1);\n        break;\n      }\n    }\n    return true;\n  },\n  once: function(event: string,fun: Function){\n    function _on(){\n      EventEmitter.off(event,_on);\n      fun.apply(this,arguments);\n    }\n    _on.fun = fun;\n    EventEmitter.on(event,_on);\n  },\n  emit: function(event: string){\n    let isString = typeof event === 'string';\n    if (!isString){\n      return;\n    }\n    let cbs = cat[event];\n    let args = toArray(arguments,1);\n    if (cbs) {\n      let i = 0;\n      let j = cbs.length;\n      for(;i<j;i++){\n        let cb = cbs[i];\n        cb.apply(this,args);\n      }\n    }\n  }\n};\n\nfunction toArray(list: Array<any>, index: ?number) {\n  let _index = index || 0;\n  let i = list.length - _index;\n  let _array = new Array(i);\n  while(i--){\n    _array[i] = list[i + _index]\n  }\n  return _array\n}\n\nexport default EventEmitter;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'weex-dingtalk-exec';\nimport { __ship_define__ } from './system-modules.js';\n\nexport default function parseModules(map: Object){\n  for (let name in map) {\n    let methods = map[name];\n    (function(_name, _methods) {\n      __ship_define__(_name, function(__ship_require__, __ship_exports__,__ship_module__) {\n        let p = {};\n        p._name = _name;\n        for (let i in _methods) {\n          let action = _methods[i];\n          p[action] = (function(_action) {\n            return function(params) {\n              if (!params) {\n                params = {};\n              }\n              let onSuccess = params.onSuccess;\n              let onFail = params.onFail;\n              delete params.onSuccess;\n              delete params.onFail;\n              delete params.onCancel;\n              const config = {\n                body: {\n                  plugin: _name,\n                  action: _action,\n                  args: params\n                },\n                onSuccess: onSuccess,\n                onFail: onFail\n              };\n              return exec(config);\n            };\n          })(action);\n        };\n        __ship_module__.__ship_exports__ = p;\n      });\n    })(name, methods);\n  }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'weex-dingtalk-exec';\nimport { __ship_require__, __ship_define__, __ship_define_remove__ } from './global-api/system-modules.js';\nimport EventEmitter from './global-api/EventEmitter.js';\nimport parseModules from './global-api/parseModules.js';\nimport weexInstanceVar from 'weex-dingtalk-polyfills';\n\nlet platform = weexInstanceVar.env.platform;\nlet globalEvent: Object = {};\nif (platform !== 'Web'){\n  globalEvent = weexInstanceVar.requireModule('globalEvent');\n}\n\nfunction rtFunc(method: string): Function {\n  return function(cb: Function) {\n    const config:{\n      body: Object,\n      onSuccess: Function,\n      onFail: Function,\n      context: ?Object\n    } = {\n      body: {\n        plugin: 'runtime',\n        action: method,\n        args: {}\n      },\n      onSuccess: function(response){\n        if (typeof cb === 'function'){\n          cb(response);\n        }\n      },\n      onFail: function(){\n\n      },\n      context: null\n    };\n    exec(config);\n  };\n}\n\nfunction initDingtalkRequire(cb: Function){\n    rtFunc('getModules')(cb);\n}\n\nlet ship: {\n  getModules: ?Object,\n  isReady: boolean,\n  define: Function,\n  require: Function,\n  runtime: Object,\n  init: Function,\n  ready: Function,\n  on: Function,\n  off: Function,\n  EventEmitter: Object\n} = {\n  getModules: null,\n  isReady: false,\n  define: __ship_define__,\n  require: function(id: string) : any{\n    if (!id){\n      return exec;\n    } else {\n      return __ship_require__(id);\n    }\n  },\n  runtime: {\n    info: rtFunc('info'),\n    _interceptBackButton: rtFunc('interceptBackButton'),\n    _interceptNavTitle: rtFunc('interceptNavTitle'),\n    _recoverNavTitle: rtFunc('recoverNavTitle'),\n    _getModules: rtFunc('getModules')\n  },\n  init: function(){\n    initDingtalkRequire(function(response){\n      if(response){\n        parseModules(response);\n        ship.isReady = true;\n        ship.getModules = response;\n        EventEmitter.emit('__ship_ready__');\n      }\n    });\n  },\n  ready: function(cb: Function){\n    if (ship.isReady){\n      if (typeof cb === 'function'){\n        cb();\n      }\n    } else {\n      if (typeof cb === 'function'){\n        EventEmitter.once('__ship_ready__', function(){\n          cb();\n        });\n      }\n    }\n  },\n  on: function(type: string, handler: Function){\n    globalEvent.addEventListener(type,function(e){\n      const event:{\n        preventDefault: Function,\n        detail: Object\n      } = {\n        preventDefault: function () {\n          console.warn('当前环境不支持 preventDefault')\n        },\n        detail: e\n      };\n      handler.call(this,event);\n    });\n  },\n  off: globalEvent.removeEventListener,\n  EventEmitter: EventEmitter\n};\n\nexport default ship;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport ship from 'weex-dingtalk-require';\n\nexport default function parseJsApis(jsApis: Object) : Object{\n  let apis: Object = {};\n  for (let name: string in jsApis) {\n    let node: Array<string> = name.split('.');\n    let staging = null;\n    let i: number = 0;\n    let j: number = node.length;\n    while (true) {\n      if (!staging) {\n        if (1 === j) {\n          apis[node[i]] = ship.require(name);\n          break;\n        }\n        if (apis[node[i]]){\n          staging = apis[node[i]];\n          i++;\n          continue;\n        }\n        apis[node[i]] = {};\n        staging = apis[node[i]];\n        i++;\n        continue;\n      } else {\n        if ((j - 1) === i) {\n          staging[node[i]] = ship.require(name);\n          break;\n        }\n        if (staging[node[i]]) {\n          i++;\n          continue;\n        }\n        staging[node[i]] = {};\n        staging = staging[node[i]];\n      }\n      i++;\n    }\n  }\n\treturn apis;\n}\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport ship from 'weex-dingtalk-require';\n\nconst runtimePermission: string = 'runtime.permission';\n\nexport default function permissionJsApis(cb: Function,jsApisConfig:?Object, errorCb: ?Function){\n  if (!jsApisConfig){\n    cb(null);\n    return;\n  }\n  ship.ready(function(){\n    const permission = ship.require(runtimePermission);\n    let apisConf = jsApisConfig ? jsApisConfig : {};\n    let errCb = errorCb ? errorCb : null;\n    apisConf.onSuccess = function(response){\n      cb(null, response);\n    };\n    apisConf.onFail = function(error){\n      if (typeof errCb === 'function'){\n        errCb(error);\n      } else {\n        cb(error, null);\n      }\n    };\n    permission.requestJsApis(apisConf);\n  });\n}\n","/* @flow */\n\nimport ship from 'weex-dingtalk-require';\nimport { extend } from 'shared/util.js';\nimport logger from 'shared/logger.js';\nimport parseJsApis from 'core/parseJsApis.js';\nimport permissionJsApis from 'core/permissionJsApis.js';\n\nlet dingtalkJsApisConfig: ?Object = null;\nlet dingtalkQueue: ?Array<Function> = null;\nlet dingtalkErrorCb: ?Function = null;\n\nfunction performQueue (){\n  if (dingtalkQueue && dingtalkQueue.length > 0){\n    dingtalkQueue.forEach(function(task){\n      task();\n    });\n    dingtalkQueue.length = 0;\n  }\n}\n\nfunction initWeexDingtalkSDK() : Object{\n  let dingtalk: {\n    isSync: boolean,\n    apis: Object,\n    config: Function,\n    init: Function,\n    ready: Function,\n    on: Function,\n    off: Function,\n    error: Function\n  } = {\n    isSync: false,\n    apis: {},\n    config: function(config: Object){\n      if (!config){\n        logger.warn('config is undefined,you must configure Dingtalk parameters');\n        return;\n      }\n      dingtalkJsApisConfig = config;\n    },\n    init: function(){\n      // 初始化一次\n      dingtalkQueue = [];\n      ship.init();\n      ship.ready(function(){\n        dingtalk.isSync = true;\n        dingtalk.apis = parseJsApis(ship.getModules ? ship.getModules : {});\n        performQueue();\n      });\n    },\n    ready: function(cb: Function){\n      if (!cb || typeof cb !== 'function'){\n        logger.warn('callback is undefined');\n        return;\n      }\n      if (dingtalk.isSync){\n        permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n      } else {\n        function bufferFunction(cb){\n          return function(){\n            permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n          }\n        }\n        dingtalkQueue && dingtalkQueue.push(bufferFunction(cb));\n      }\n    },\n    error: function(cb){\n      if (typeof cb === 'function'){\n        dingtalkErrorCb = cb;\n      }\n    },\n    on: ship.on,\n    off: ship.off\n  };\n  return dingtalk;\n}\n\nexport default initWeexDingtalkSDK;\n","/* @flow */\n\nconst logger:{\n  warn:Function,\n  info:Function,\n  error:Function\n} = {\n  warn: function (msg: string, e:Object){\n    console.warn('[DINGTALK JS SDK Warning]:', msg);\n    if (e) {\n      throw e;\n    } else {\n      const warning = new Error('WARNING STACK TRACE');\n      console.warn(warning.stack);\n    }\n  },\n  info: function (msg){\n    console.info('[DINGTALK JS SDK INFO]:', msg);\n  },\n  error: function (msg){\n    console.error('[DINGTALK JS SDK ERROR]:', msg);\n  }\n};\n\nexport default logger;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n// @flow\n\n\nimport weexInstanceVar from 'weex-dingtalk-polyfills';\nimport initWebDingtalkSDK from './platforms/web/index.js';\nimport initWeexDingtalkSDK from './platforms/weex/index.js';\n\nlet dingtalkInit: boolean = true;\nlet platform: string = weexInstanceVar.env.platform;\nlet dingtalkSDK: Object = {};\n\nif (dingtalkInit){\n  dingtalkInit = false;\n  switch (platform){\n    case 'Web':\n        dingtalkSDK = initWebDingtalkSDK();\n      break;\n    default:\n        // default weex env SDK\n        dingtalkSDK = initWeexDingtalkSDK();\n        dingtalkSDK.init();\n      break\n  }\n}\n\nexport default dingtalkSDK;\n"],"names":["initEnv","weexEnv","weex","platform","config","env","callNative","navigator","initRequireModule","requireModule","name","moduleName","__weex_require__","polyfills","initRequire","initNativeEvent","dt","on","type","listener","useCapture","addEventListener","off","removeEventListener","initApis","apis","initWebDingtalkSDK","GLOBALWINDOW","window","this","dd","error","Error","android_exec","exec","body","win","onSuccess","fail","onFail","context","response","__status__","status","message","__message__","call","ios_exec","errorCode","result","native_exec","nativeExec","build","__ship_module__","factory","__ship_exports__","__ship_require__","id","__ship_modules__","inProgressModules","requireStack","slice","join","length","push","pop","__ship_define__","toArray","list","index","_index","i","_array","Array","parseModules","map","methods","_name","_methods","p","action","_action","params","onCancel","rtFunc","method","cb","initDingtalkRequire","parseJsApis","jsApis","node","split","staging","j","ship","require","permissionJsApis","jsApisConfig","errorCb","ready","permission","runtimePermission","apisConf","errCb","requestJsApis","performQueue","dingtalkQueue","forEach","task","initWeexDingtalkSDK","dingtalk","warn","init","isSync","getModules","dingtalkJsApisConfig","dingtalkErrorCb","weexInstanceVar","cat","EventEmitter","event","fun","cbs","splice","_on","apply","arguments","args","globalEvent","isReady","emit","once","handler","e","logger","msg","warning","stack","info","dingtalkInit","dingtalkSDK"],"mappings":"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"}