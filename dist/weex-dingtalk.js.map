{"version":3,"file":"weex-dingtalk.js","sources":["../node_modules/.0.0.2@weex-dingtalk-exec/src/android_exec.js","../node_modules/.0.0.2@weex-dingtalk-exec/src/ios_exec.js","../node_modules/.0.0.2@weex-dingtalk-exec/src/index.js","../node_modules/.0.0.2@weex-dingtalk-require/src/global-api/system-modules.js","../node_modules/.0.0.2@weex-dingtalk-require/src/global-api/EventEmitter.js","../node_modules/.0.0.2@weex-dingtalk-require/src/global-api/parseModules.js","../node_modules/.0.0.2@weex-dingtalk-require/src/index.js","../src/core/permissionJsApis.js","../src/core/parseJsApis.js","../src/platforms/web/nativeEvent.js","../src/platforms/web/index.js","../src/index.js"],"sourcesContent":["/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function android_exec(exec:Function,config:Object){\n    const body = config.body;\n    const win = config.onSuccess;\n    const fail = config.onFail;\n    const context = config.context;\n    const STATUS_NO_RESULT: string = '0';\n    const STATUS_OK: string = '1';\n    const STATUS_ERROR: string = '2';\n    if (exec && typeof exec === 'function'){\n        exec(body,function (response) {\n            if (typeof response !== \"undefined\" && response.__status__) {\n                const status = response.__status__;\n                const message = response.__message__;\n                if (STATUS_OK === status){\n                    win && win.call(context, message);\n                } else if (STATUS_ERROR === status){\n                    fail && fail.call(context, message);\n                }\n            } else {\n                fail && fail.call('-1', \"\");\n            }\n        });\n    } else {\n        fail && fail.call('-1', \"\");\n    }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nexport default function ios_exec(exec:Function,config:Object){\n    const body = config.body;\n    const win = config.onSuccess;\n    const fail = config.onFail;\n    const context = config.context;\n    if (exec && typeof exec === 'function'){\n        exec(body,function (response) {\n            if (typeof response !== \"undefined\") {\n                if ('0' === response.errorCode) {\n                    win && win.call(context, response.result);\n                } else {\n                    fail && fail.call(context, response.result);\n                }\n            }\n            else {\n                fail && fail.call('-1', \"\");\n            }\n        });\n    } else {\n        fail && fail.call('-1', \"\");\n    }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport android_exec from './android_exec.js';\nimport ios_exec from './ios_exec.js';\n\nlet { platform } = weex.config.env;\nlet nativeExec: Function = weex.requireModule('nuvajs-exec').exec;\n\nfunction exec_affirm(plugin: string, action: string, args: ?Object,onSuccess: ?Function, onFail: ?Function, context: ?Object){\n    const body: {\n        plugin: string,\n        action: string,\n        args: Object\n    } = {\n        plugin: plugin,\n        action: action,\n        args: args ? args : {}\n    }\n    const config: {\n        body: Object,\n        onSuccess: ?Function,\n        onFail: ?Function,\n        context: ?Object\n    } = {\n        body: body,\n        onSuccess: onSuccess ? onSuccess : null,\n        onFail: onFail ? onFail : null,\n        context: context ? context : null\n    }\n    exec(config);\n}\n\nfunction exec(config:Object) {\n    if (platform === 'iOS'){\n        ios_exec(nativeExec,config);\n    } else {\n        if (platform === 'android'){\n            android_exec(nativeExec,config);\n        }\n    }\n}\n\nexport default exec;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet __nuva_modules__: Object = {};\nlet requireStack: Array<string> = [];\nlet inProgressModules: Object = {};\n\nfunction build(__nuva_module__: Object) {\n    var factory = __nuva_module__.factory;\n    __nuva_module__.__nuva_exports__ = {};\n    delete __nuva_module__.factory;\n    factory(__nuva_require__, __nuva_module__.__nuva_exports__, __nuva_module__);\n    return __nuva_module__.__nuva_exports__;\n}\nexport function __nuva_require__(id: string) : any {\n    if (!__nuva_modules__[id]) {\n        throw '__nuva_module__ ' + id + ' not found';\n    } else if (id in inProgressModules) {\n        const cycle = requireStack.slice(inProgressModules[id]).join('->') + '->' + id;\n        throw 'Cycle in require graph: ' + cycle;\n    }\n    if (__nuva_modules__[id].factory) {\n        try {\n            inProgressModules[id] = requireStack.length;\n            requireStack.push(id);\n            return build(__nuva_modules__[id]);\n        } finally {\n            delete inProgressModules[id];\n            requireStack.pop();\n        }\n    }\n    return __nuva_modules__[id].__nuva_exports__;\n};\n\nexport function __nuva_define__(id: string, factory: Function) {\n    if (__nuva_modules__[id]) {\n        throw 'module ' + id + ' already defined';\n    }\n    __nuva_modules__[id] = {\n        id: id,\n        factory: factory\n    };\n};\n\nexport function __nuva_define_remove__(id: string){\n    delete __nuva_modules__[id];\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nlet cat: Object = {};\nlet EventEmitter:{\n    on: Function,\n    off: Function,\n    once: Function,\n    emit: Function\n} = {\n    on: function(event: string,fun: Function){\n        let cbs = cat[event];\n        cbs ? cbs.push(fun) : cat[event] = [];\n        if (!cbs) {\n            cat[event].push(fun);\n        }\n    },\n    off: function(event: string,fun: Function){\n        let cbs = cat[event];\n        if (!cbs) {\n            return false;\n        }\n        if (!event && !fun) {\n            cat = {};\n            return true;\n        }\n        if (event && !fun) {\n            cat[event] = null;\n            return true;\n        }\n        let cb;\n        let i = cbs.length;\n        while(i--){\n            cb = cbs[i];\n            if (cb === fun || cb.fun === fun) {\n                cbs.splice(i,1);\n                break;\n            }\n        }\n        return true;\n    },\n    once: function(event: string,fun: Function){\n        function _on(){\n            EventEmitter.off(event,_on);\n            fun.apply(this,arguments);\n        }\n        _on.fun = fun;\n        EventEmitter.on(event,_on);\n    },\n    emit: function(event: string){\n        let isString = typeof event === 'string';\n        if (!isString){\n            return;\n        }\n        let cbs = cat[event];\n        let args = toArray(arguments,1);\n        if (cbs) {\n            let i = 0;\n            let j = cbs.length;\n            for(;i<j;i++){\n                let cb = cbs[i];\n                cb.apply(this,args);\n            }\n        }\n    }\n};\n\nfunction toArray(list: Array<any>, index: ?number) {\n    let _index = index || 0;\n    let i = list.length - _index;\n    let _array = new Array(i);\n    while(i--){\n        _array[i] = list[i + _index]\n    }\n    return _array\n}\n\nexport default EventEmitter;\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'weex-dingtalk-exec';\nimport { __nuva_define__ } from './system-modules.js';\n\nexport default function parseModules(map: Object){\n    for (let name in map) {\n        let methods = map[name];\n        (function(_name, _methods) {\n            __nuva_define__(_name, function(__nuva_require__, __nuva_exports__,__nuva_module__) {\n                let p = {};\n                p._name = _name;\n                for (let i in _methods) {\n                    let action = _methods[i];\n                    p[action] = (function(_action) {\n                        return function(params) {\n                            if (!params) {\n                                params = {};\n                            }\n                            let onSuccess = params.onSuccess;\n                            let onFail = params.onFail;\n                            delete params.onSuccess;\n                            delete params.onFail;\n                            delete params.onCancel;\n                            const config = {\n                                body: {\n                                    plugin: _name,\n                                    action: _action,\n                                    args: params\n                                },\n                                onSuccess: onSuccess,\n                                onFail: onFail\n                            };\n                            return exec(config);\n                        };\n                    })(action);\n                };\n                __nuva_module__.__nuva_exports__ = p;\n            });\n        })(name, methods);\n    }\n}\n","/**\n * Created by xiangwenwen on 2017/3/24.\n */\n\n// @flow\n\nimport exec from 'weex-dingtalk-exec';\nimport { __nuva_require__, __nuva_define__, __nuva_define_remove__ } from './global-api/system-modules.js';\nimport EventEmitter from './global-api/EventEmitter.js';\nimport parseModules from './global-api/parseModules.js';\n\nconst globalEvent: Object = weex.requireModule('globalEvent');\n\nfunction rtFunc(method: string): Function {\n    return function(cb: Function) {\n        const config:{\n            body: Object,\n            onSuccess: Function,\n            onFail: Function,\n            context: ?Object\n        } = {\n            body: {\n                plugin: 'runtime',\n                action: method,\n                args: {}\n            },\n            onSuccess: function(response){\n                if (typeof cb === 'function'){\n                    cb(response);\n                }\n            },\n            onFail: function(){\n\n            },\n            context: null\n        };\n        exec(config);\n    };\n}\n\nfunction initDingtalkRequire(cb: Function){\n    rtFunc('getModules')(cb);\n}\n\nlet nuva: {\n    getModules: ?Object,\n    isReady: boolean,\n    define: Function,\n    require: Function,\n    runtime: Object,\n    init: Function,\n    ready: Function,\n    on: Function,\n    off: Function,\n    EventEmitter: Object\n} = {\n    getModules: null,\n    isReady: false,\n    define: __nuva_define__,\n    require: function(id: string) : any{\n        if (!id){\n            return exec;\n        } else {\n            return __nuva_require__(id);\n        }\n    },\n    runtime: {\n        info: rtFunc('info'),\n        _interceptBackButton: rtFunc('interceptBackButton'),\n        _interceptNavTitle: rtFunc('interceptNavTitle'),\n        _recoverNavTitle: rtFunc('recoverNavTitle'),\n        _getModules: rtFunc('getModules')\n    },\n    init: function(){\n        initDingtalkRequire(function(response){\n            if(response){\n                parseModules(response);\n                nuva.isReady = true;\n                nuva.getModules = response;\n                EventEmitter.emit('__nuva_ready__');\n            }\n        });\n    },\n    ready: function(cb: Function){\n        if (nuva.isReady){\n            if (typeof cb === 'function'){\n                cb();\n            }\n        } else {\n            if (typeof cb === 'function'){\n                EventEmitter.once('__nuva_ready__', function(){\n                    cb();\n                });\n            }\n        }\n    },\n    on: function(type: string, handler: Function){\n        globalEvent.addEventListener(type,function(e){\n            const event:{\n                preventDefault: Function,\n                detail: Object\n            } = {\n                preventDefault: function () {\n                    console.warn('当前环境不支持 preventDefault')\n                },\n                detail: e\n            };\n            handler.call(this,event);\n        });\n    },\n    off: globalEvent.removeEventListener,\n    EventEmitter: EventEmitter\n};\n\nexport default nuva;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport dt_nuva from 'weex-dingtalk-require';\n\nconst runtimePermission: string = 'runtime.permission';\n\nexport default function permissionJsApis(cb: Function,jsApisConfig:?Object, errorCb: ?Function){\n  if (!jsApisConfig){\n    cb(null);\n    return;\n  }\n  dt_nuva.ready(function(){\n    const permission = dt_nuva.require(runtimePermission);\n    let apisConf = jsApisConfig ? jsApisConfig : {};\n    let errCb = errorCb ? errorCb : null;\n    apisConf.onSuccess = function(response){\n      cb(null, response);\n    };\n    apisConf.onFail = function(error){\n      if (typeof errCb === 'function'){\n        errCb(error);\n      } else {\n        cb(error, null);\n      }\n    };\n    permission.requestJsApis(apisConf);\n  });\n}\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n//@flow\n\nimport dt_nuva from 'weex-dingtalk-require';\n\nexport default function parseJsApis(jsApis: Object) : Object{\n  let apis: Object = {};\n  for (let name: string in jsApis) {\n    let node: Array<string> = name.split('.');\n    let staging = null;\n    let i: number = 0;\n    let j: number = node.length;\n    while (true) {\n      if (!staging) {\n        if (1 === j) {\n          apis[node[i]] = dt_nuva.require(name);\n          break;\n        }\n        if (apis[node[i]]){\n          staging = apis[node[i]];\n          i++;\n          continue;\n        }\n        apis[node[i]] = {};\n        staging = apis[node[i]];\n        i++;\n        continue;\n      } else {\n        if ((j - 1) === i) {\n          staging[node[i]] = dt_nuva.require(name);\n          break;\n        }\n        if (staging[node[i]]) {\n          i++;\n          continue;\n        }\n        staging[node[i]] = {};\n        staging = staging[node[i]];\n      }\n      i++;\n    }\n  }\n\treturn apis;\n}\n","\nfunction initNativeEvent(dt:Object){\n  dt.on = document.addEventListener;\n  dt.off = document.removeEventListener;\n}\n\nexport default initNativeEvent;\n","\n/* @flow */\n\nimport initNativeEvent from './nativeEvent.js';\n\nfunction initWebDingtalkSDK () : Object {\n  const GLOBALWINDOW:GLOBALWINDOW = (function(){\n    return (function(){\n      return window || this;\n    })();\n  })();\n  if (!GLOBALWINDOW.dd){\n    console.error('Not Found Dingtalk.js');\n    throw new Error()\n  }\n  initNativeEvent(GLOBALWINDOW.dd);\n  return GLOBALWINDOW.dd;\n}\n\nexport default initWebDingtalkSDK;\n","/**\n * Created by xiangwenwen on 2017/3/27.\n */\n\n// @flow\n\nimport dt_nuva from 'weex-dingtalk-require';\nimport permissionJsApis from './core/permissionJsApis.js';\nimport { extend } from './shared/util.js';\nimport parseJsApis from './core/parseJsApis.js';\nimport initWebDingtalkSDK from './platforms/web/index.js';\n\nlet dingtalkJsApisConfig: ?Object = null;\nlet dingtalkQueue: ?Array<Function> = null;\nlet dingtalkErrorCb: ?Function = null;\nlet dingtalkInit: boolean = true;\nlet { platform } = weex.config.env;\n\nfunction performQueue (){\n  if (dingtalkQueue && dingtalkQueue.length > 0){\n    dingtalkQueue.forEach(function(task){\n      task();\n    });\n    dingtalkQueue.length = 0;\n  }\n}\n\nlet dingtalkSDK: Object = {};\nlet dingtalk: {\n  isSync: boolean,\n  apis: Object,\n  config: Function,\n  init: Function,\n  ready: Function,\n  on: Function,\n  off: Function,\n  error: Function\n} = {\n  isSync: false,\n  apis: {},\n  config: function(config: Object){\n    if (!config){\n      return;\n    }\n    dingtalkJsApisConfig = config;\n  },\n  init: function(){\n    // 初始化一次\n    dingtalkQueue = [];\n    dt_nuva.init();\n    dt_nuva.ready(function(){\n      dingtalk.isSync = true;\n      dingtalk.apis = parseJsApis(dt_nuva.getModules ? dt_nuva.getModules : {});\n      performQueue();\n    });\n  },\n  ready: function(cb: Function){\n    if (!cb || typeof cb !== 'function'){\n      return;\n    }\n    if (dingtalk.isSync){\n      permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n    } else {\n      function bufferFunction(cb){\n        return function(){\n          permissionJsApis(cb,dingtalkJsApisConfig,dingtalkErrorCb);\n        }\n      }\n      dingtalkQueue && dingtalkQueue.push(bufferFunction(cb));\n    }\n  },\n  error: function(cb){\n    if (typeof cb === 'function'){\n      dingtalkErrorCb = cb;\n    }\n  },\n  on: dt_nuva.on,\n  off: dt_nuva.off\n};\n\nif (dingtalkInit){\n  dingtalkInit = false;\n  switch (platform){\n    case 'Web':\n        dingtalkSDK = initWebDingtalkSDK();\n      break;\n    default:\n        dingtalkSDK = dingtalk;\n        dingtalk.init();\n      break\n  }\n}\n\nexport default dingtalkSDK;\n"],"names":["android_exec","exec","config","body","win","onSuccess","fail","onFail","context","STATUS_NO_RESULT","STATUS_OK","STATUS_ERROR","response","__status__","status","message","__message__","call","ios_exec","errorCode","result","platform","weex","env","nativeExec","requireModule","__nuva_modules__","requireStack","inProgressModules","build","__nuva_module__","factory","__nuva_exports__","__nuva_require__","id","cycle","slice","join","length","push","pop","__nuva_define__","cat","EventEmitter","event","fun","cbs","cb","i","splice","_on","off","apply","arguments","on","isString","args","toArray","j","list","index","_index","_array","Array","parseModules","map","name","methods","_name","_methods","p","action","_action","params","onCancel","globalEvent","rtFunc","method","initDingtalkRequire","nuva","isReady","getModules","emit","once","type","handler","addEventListener","e","warn","removeEventListener","runtimePermission","permissionJsApis","jsApisConfig","errorCb","ready","permission","dt_nuva","require","apisConf","errCb","error","requestJsApis","parseJsApis","jsApis","apis","node","split","staging","initNativeEvent","dt","document","initWebDingtalkSDK","GLOBALWINDOW","window","dd","Error","dingtalkJsApisConfig","dingtalkQueue","dingtalkErrorCb","dingtalkInit","performQueue","forEach","task","dingtalkSDK","dingtalk","init","isSync","bufferFunction"],"mappings":"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"}