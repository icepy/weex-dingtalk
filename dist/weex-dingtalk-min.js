"use strict";function initEnv(){var n={};return"undefined"!=typeof weex?n.platform=weex.config.env.platform:"function"==typeof callNative?n.platform=navigator.platform:n.platform="Web",n}function initRequireModule(){var n=function(n){var e="@weex-module/"+n;return __weex_require__(e)};return"undefined"!=typeof weex&&(n=weex.requireModule),n}function polyfills(){return{env:initEnv(),requireModule:initRequireModule()}}function initNativeEvent(n){n.on=function(n,e,i){document.addEventListener(n,e,i)},n.off=function(n,e,i){document.removeEventListener(n,e,i)}}function initApis(n){n.apis=n}function initWebDingtalkSDK(){var n=function(){return function(){return window||this}()}();if(!n.dd)throw console.error("Not Found Dingtalk.js"),new Error;return initNativeEvent(n.dd),initApis(n.dd),n.dd}function android_exec(n,e){var i=e.body,t=e.onSuccess,r=e.onFail,o=e.context;n&&"function"==typeof n?n(i,function(n){if(void 0!==n&&n.__status__){var e=n.__status__,i=n.__message__;"1"===e?t&&t.call(o,i):"2"===e&&r&&r.call(o,i)}else r&&r.call("-1","")}):r&&r.call("-1","")}function ios_exec(n,e){var i=e.body,t=e.onSuccess,r=e.onFail,o=e.context;n&&"function"==typeof n?n(i,function(n){void 0!==n?"0"===n.errorCode?t&&t.call(o,n.result):r&&r.call(o,n.result):r&&r.call("-1","")}):r&&r.call("-1","")}function exec(n){var e=nativeExec||function(){};"iOS"===platform$2?ios_exec(e,n):"android"===platform$2&&android_exec(e,n)}function build(n){var e=n.factory;return n.__ship_exports__={},delete n.factory,e(__ship_require__,n.__ship_exports__,n),n.__ship_exports__}function __ship_require__(n){if(!__ship_modules__[n])throw"__ship_module__ "+n+" not found";if(n in inProgressModules){throw"Cycle in require graph: "+(requireStack.slice(inProgressModules[n]).join("->")+"->"+n)}if(__ship_modules__[n].factory)try{return inProgressModules[n]=requireStack.length,requireStack.push(n),build(__ship_modules__[n])}finally{delete inProgressModules[n],requireStack.pop()}return __ship_modules__[n].__ship_exports__}function __ship_define__(n,e){if(__ship_modules__[n])throw"module "+n+" already defined";__ship_modules__[n]={id:n,factory:e}}function toArray(n,e){for(var i=e||0,t=n.length-i,r=new Array(t);t--;)r[t]=n[t+i];return r}function parseModules(n){for(var e in n){var i=n[e];!function(n,e){__ship_define__(n,function(i,t,r){var o={};o._name=n;for(var u in e){var a=e[u];o[a]=function(e){return function(i){i||(i={});var t=i.onSuccess,r=i.onFail;return delete i.onSuccess,delete i.onFail,delete i.onCancel,exec({body:{plugin:n,action:e,args:i},onSuccess:t,onFail:r})}}(a)}r.__ship_exports__=o})}(e,i)}}function rtFunc(n){return function(e){exec({body:{plugin:"runtime",action:n,args:{}},onSuccess:function(n){"function"==typeof e&&e(n)},onFail:function(){},context:null})}}function initDingtalkRequire(n){rtFunc("getModules")(n)}function parseJsApis(n){var e={};for(var i in n)for(var t=i.split("."),r=null,o=0,u=t.length;;)if(r){if(u-1===o){r[t[o]]=ship.require(i);break}r[t[o]]?o++:(r[t[o]]={},r=r[t[o]],o++)}else{if(1===u){e[t[o]]=ship.require(i);break}if(e[t[o]]){r=e[t[o]],o++;continue}e[t[o]]={},r=e[t[o]],o++}return e}function permissionJsApis(n,e,i){if(!e)return void n(null);ship.ready(function(){var t=ship.require(runtimePermission),r=e||{},o=i||null;r.onSuccess=function(e){n(null,e)},r.onFail=function(e){"function"==typeof o?o(e):n(e,null)},t.requestJsApis(r)})}function performQueue(){dingtalkQueue&&dingtalkQueue.length>0&&(dingtalkQueue.forEach(function(n){n()}),dingtalkQueue.length=0)}function initWeexDingtalkSDK(){var n={isSync:!1,apis:{},config:function(n){function e(e){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){if(!n)return void logger.warn("config is undefined,you must configure Dingtalk parameters");dingtalkJsApisConfig=n}),init:function(){dingtalkQueue=[],ship.init(),ship.ready(function(){n.isSync=!0,n.apis=parseJsApis(ship.getModules?ship.getModules:{}),performQueue()})},ready:function(e){if(!e||"function"!=typeof e)return void logger.warn("callback is undefined");if(n.isSync)permissionJsApis(e,dingtalkJsApisConfig,dingtalkErrorCb);else{dingtalkQueue&&dingtalkQueue.push(function(n){return function(){permissionJsApis(n,dingtalkJsApisConfig,dingtalkErrorCb)}}(e))}},error:function(n){"function"==typeof n&&(dingtalkErrorCb=n)},on:ship.on,off:ship.off};return n}var weexInstanceVar=void 0;weexInstanceVar||(weexInstanceVar=polyfills());var weexInstanceVar$1=weexInstanceVar,platform$2=weexInstanceVar$1.env.platform,nativeExec=null;"Web"!==platform$2&&(nativeExec=weexInstanceVar$1.requireModule("nuvajs-exec").exec);var __ship_modules__={},requireStack=[],inProgressModules={},cat={},EventEmitter={on:function(n,e){var i=cat[n];i?i.push(e):cat[n]=[],i||cat[n].push(e)},off:function(n,e){var i=cat[n];if(!i)return!1;if(!n&&!e)return cat={},!0;if(n&&!e)return cat[n]=null,!0;for(var t=void 0,r=i.length;r--;)if((t=i[r])===e||t.fun===e){i.splice(r,1);break}return!0},once:function(n,e){function i(){EventEmitter.off(n,i),e.apply(this,arguments)}i.fun=e,EventEmitter.on(n,i)},emit:function(n){if("string"==typeof n){var e=cat[n],i=toArray(arguments,1);if(e)for(var t=0,r=e.length;t<r;t++){var o=e[t];o.apply(this,i)}}}},platform$1=weexInstanceVar$1.env.platform,globalEvent={};"Web"!==platform$1&&(globalEvent=weexInstanceVar$1.requireModule("globalEvent"));var ship={getModules:null,isReady:!1,define:__ship_define__,require:function(n){return n?__ship_require__(n):exec},runtime:{info:rtFunc("info"),_interceptBackButton:rtFunc("interceptBackButton"),_interceptNavTitle:rtFunc("interceptNavTitle"),_recoverNavTitle:rtFunc("recoverNavTitle"),_getModules:rtFunc("getModules")},init:function(){initDingtalkRequire(function(n){n&&(parseModules(n),ship.isReady=!0,ship.getModules=n,EventEmitter.emit("__ship_ready__"))})},ready:function(n){ship.isReady?"function"==typeof n&&n():"function"==typeof n&&EventEmitter.once("__ship_ready__",function(){n()})},on:function(n,e){globalEvent.addEventListener(n,function(n){var i={preventDefault:function(){console.warn("当前环境不支持 preventDefault")},detail:n};e.call(this,i)})},off:globalEvent.removeEventListener,EventEmitter:EventEmitter},logger={warn:function(n,e){if(console.warn("[DINGTALK JS SDK Warning]:",n),e)throw e;var i=new Error("WARNING STACK TRACE");console.warn(i.stack)},info:function(n){console.info("[DINGTALK JS SDK INFO]:",n)},error:function(n){console.error("[DINGTALK JS SDK ERROR]:",n)}},runtimePermission="runtime.permission",dingtalkJsApisConfig=null,dingtalkQueue=null,dingtalkErrorCb=null,dingtalkInit=!0,platform=weexInstanceVar$1.env.platform,dingtalkSDK={};if(dingtalkInit)switch(dingtalkInit=!1,platform){case"Web":dingtalkSDK=initWebDingtalkSDK();break;default:dingtalkSDK=initWeexDingtalkSDK(),dingtalkSDK.init()}var dingtalkSDK$1=dingtalkSDK;module.exports=dingtalkSDK$1;
//# sourceMappingURL=weex-dingtalk-min.js.map
